import{H as b,L as v,r,o as a,c as o,b as i,w as h,F as u,d as t,h as m,t as c,Y as k,f as M}from"./app.f7242b2d.js";import{A as j}from"./Admin.f9509daf.js";import{F as C,f as D,o as B,N as T,V as L,r as N}from"./useConfirm.ce82610c.js";import{G as A}from"./GachaButtons.9e058e4d.js";import{P as G}from"./Pagination.0d9fbc6c.js";import{_ as O}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as V}from"./ExclamationTriangleIcon.cd45eb1e.js";import"./PlayIcon.80973e8d.js";import"./ChevronRightIcon.b0a9abee.js";import"./EllipsisHorizontalIcon.79b1d0fd.js";const F={components:{Head:b,AppLayout:j,Footer:C,Link:v,GachaButtons:A,Pagination:G,TransitionRoot:D,TransitionChild:B,Dialog:T,DialogOverlay:L,XMarkIcon:N,ExclamationTriangleIcon:V},props:{errors:Object,gacha:Object,category_share:Object,gacha_log:Array,is_admin:Boolean,search_cond:Object,total:Number,code:String},data(){return{products:[this.gacha.products.filter(s=>s.rank==1),this.gacha.products.filter(s=>s.rank==2),this.gacha.products.filter(s=>s.rank==3),this.gacha.products.filter(s=>s.rank==4)],last_product:this.gacha.products.filter(s=>s.is_last==1),isDialogMessage:!1,dialogMessage:"",image:""}},methods:{format_number(s){return String(s).replace(/(.)(?=(\d{3})+$)/g,"$1,")},openImage(s){this.image=s,this.isDialogMessage=!0}},computed:{progress_value(){return Math.round(this.gacha.count_rest*100/this.gacha.count_card)+"%"},progress_background_width(){return this.gacha.count_rest==0?"100%":Math.round(this.gacha.count_card*100/this.gacha.count_rest)+"%"}}},H={key:0,class:"w-full min-h-full"},P={class:"md:w-[680px] w-full mx-auto bg-white"},S={class:"mx-auto relative"},z=["src"],I=["src"],R={class:"w-full bg-neutral-700 sticky bottom-0 mt-4"},E={class:"mx-auto md:max-w-md px-1 py-2 space-y-2"},X={class:"text-white font-[mplus2]"},Y={class:"flex justify-between items-center w-full"},q={class:"flex items-center gap-2 w-[45%]"},J=t("div",{class:"bg-white/10 p-1.5 rounded-lg"},[t("img",{src:"/images/icon_cash.png",class:"h-5"})],-1),K={class:"flex flex-col"},Q={class:"text-white text-base md:text-lg font-bold"},U=t("span",{class:"text-gray-400 text-xs"},"/ 1\u56DE",-1),W={class:"flex-1 flex flex-col items-end gap-2"},Z={key:0,class:"text-white text-xs"},$={key:1,class:"flex items-center"},tt=t("span",{class:"font-medium text-gray-400"},"- / -",-1),et=[tt],st={class:"w-full"},at={class:"w-full h-2.5 rounded-full overflow-hidden bg-neutral-400/50"},ot={key:1,class:"w-full"},nt={class:"flex flex-wrap justify-between items-center px-4 py-3 sticky top-[79px] bg-white"},ct=t("h3",{class:"underline underline-offset-4 text-lg"},"\u6392\u51FA\u5C65\u6B74",-1),it={class:"overflow-auto px-1"},rt={class:"min-w-full"},lt={class:"border-b border-collapse text-nowrap"},dt=t("th",{class:"text-center py-2 px-2"},"\u756A\u53F7",-1),_t=t("th",{class:"text-center py-2 px-2"},"\u540D\u524D",-1),ht=t("th",{class:"text-center py-2 px-2"},"\u753B\u50CF",-1),ut=t("th",{class:"text-center py-2 px-2"},"\u30EC\u30A2\u5EA6",-1),mt=t("th",{class:"text-center py-2 px-2"},"\u30DD\u30A4\u30F3\u30C8",-1),gt=t("th",{class:"text-center py-2 px-2"},"\u30E6\u30FC\u30B6\u30FC",-1),ft=t("th",{class:"text-center py-2 px-2"},"\u6642\u9593",-1),xt={class:"border-b border-collapse text-sm"},pt={class:"text-center py-2 px-2"},yt={class:"text-center py-2 px-2"},wt={class:"text-center py-1 px-2 flex justify-center min-w-20 items-center"},bt=["src"],vt={class:"text-center py-2 px-2"},kt={class:"text-center py-2 px-2"},Mt={class:"text-center py-2 px-2"},jt={class:"text-center py-2 px-2"},Ct=["src"];function Dt(s,d,e,Bt,_,l){const f=r("Head"),x=r("GachaButtons"),p=r("Pagination"),g=r("TransitionChild"),y=r("TransitionRoot"),w=r("AppLayout");return a(),o(u,null,[i(f,{title:"\u30AC\u30C1\u30E3"}),i(w,null,{default:h(()=>[e.gacha_log.length==0?(a(),o("div",H,[t("div",P,[t("div",S,[e.gacha.image!=""?(a(),o("img",{key:0,src:e.gacha.image,class:"block w-full"},null,8,z)):m("",!0),e.gacha.image==""?(a(),o("img",{key:1,src:e.gacha.thumbnail,class:"block w-full md:w-4/5 mx-auto"},null,8,I)):m("",!0)])]),t("div",R,[t("div",E,[t("div",X,[t("div",Y,[t("div",q,[J,t("div",K,[t("span",Q,c(l.format_number(e.gacha.point)),1),U])]),t("div",W,[e.gacha.count_card>0?(a(),o("span",Z," \u6B8B\u308A "+c(l.format_number(e.gacha.count_rest))+" / "+c(l.format_number(e.gacha.count_card)),1)):(a(),o("div",$,et)),t("div",st,[t("div",at,[t("div",{class:"h-full rounded-full bg-gradient-to-r from-sky-400 to-sky-500 transition-all duration-500",style:k(e.gacha.count_card>0?{width:l.progress_value}:{})},null,4)])])])])]),i(x,{gacha:{...e.gacha,code:e.code}},null,8,["gacha"])])])])):(a(),o("div",ot,[t("div",nt,[ct,i(p,{search_cond:{...e.search_cond,id:e.gacha.id},route_name:"user.gacha",total:e.total},null,8,["search_cond","total"])]),t("div",it,[t("table",rt,[t("thead",null,[t("tr",lt,[dt,_t,ht,ut,e.is_admin?(a(),o(u,{key:0},[mt,gt,ft],64)):m("",!0)])]),t("tbody",null,[(a(!0),o(u,null,M(e.gacha_log,(n,Tt)=>(a(),o("tr",xt,[t("td",pt,c(n.gacha_record_id),1),t("td",yt,c(n.name),1),t("td",wt,[t("img",{class:"w-16",src:n.image},null,8,bt)]),t("td",vt,c(n.rare),1),e.is_admin?(a(),o(u,{key:0},[t("td",kt,c(l.format_number(n.point)),1),t("td",Mt,c(n.email),1),t("td",jt,c(n.gacha_time),1)],64)):m("",!0)]))),256))])])])])),i(y,{show:_.isDialogMessage,class:"h-full fixed inset-0 z-40 top-0"},{default:h(()=>[i(g,{enter:"transition ease-in-out duration-100 transform","enter-from":"scale-50","enter-to":"scale-100",leave:"transition ease-in-out duration-200 transform","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:h(()=>[t("div",{class:"relative z-20 w-full mx-auto md:w-[768px] h-screen flex items-center",onClick:d[0]||(d[0]=n=>_.isDialogMessage=!1)},[t("img",{src:_.image,class:"mx-auto max-h-[80%] max-w-[80%] w-full object-contain"},null,8,Ct)])]),_:1}),i(g,{enter:"transition-opacity ease-linear duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-100","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:h(()=>[t("div",{class:"fixed inset-0 bg-white h-full",onClick:d[1]||(d[1]=n=>_.isDialogMessage=!1)})]),_:1})]),_:1},8,["show"])]),_:1})],64)}const zt=O(F,[["render",Dt]]);export{zt as default};

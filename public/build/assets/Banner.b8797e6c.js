import{L as U,H as I,E as A,G as b,r as i,o as a,c,b as d,w as f,F as m,d as e,I as _,h as p,J as g,K as w,f as j,n as V}from"./app.a5c99382.js";import{A as D}from"./Admin.cc048d57.js";import{V as M,r as O,a as R}from"./ArrowLongUpIcon.d5bd8bfa.js";import{u as S}from"./useConfirm.0c422564.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";const{confirm:F}=S(),H={components:{Link:U,Head:I,AppLayout:D,draggable:M,ArrowLongUpIcon:O,ArrowLongDownIcon:R},props:{errors:Object,auth:Object,banners:Object},methods:{log(){},submit(){this.new_form.file=this.$refs.file.files[0],this.new_form.link_url=this.banner.link_url,this.new_form.post(route("admin.banner.create"),{onSuccess:()=>this.new_form.reset(),preserveScroll:!0})},destroy(s){F("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F","","error").then(t=>{t&&A.Inertia.delete(route("admin.banner.destroy",s),{preserveScroll:!0})})},previewImage(s,t){if(s.target.files.length>0){const o=s.target.files[0];t==-1?this.banner.image=URL.createObjectURL(o):this.banners[t].image=URL.createObjectURL(o)}},levelUp(s){let t;for(t=1;t<this.banners.length&&this.banners[t].id!=s;t++);t<this.banners.length&&this.arrayMove(t,t-1)},arrayMove(s,t){this.banners.splice(t,0,this.banners.splice(s,1)[0])},levelDown(s){let t;for(t=0;t<this.banners.length-1&&this.banners[t].id!=s;t++);t<this.banners.length-1&&this.arrayMove(t,t+1)},submit_order(){this.order_form.files=this.$refs.photo.map(s=>s.files[0]),this.order_form.banners=this.banners,this.order_form.post(route("admin.banner.store"),{preserveScroll:!0,onFinish:()=>{}})}},data(){return{open:!0,dragging:!1,banner:{link_url:"",image:""}}},setup(s){const t=b({file:null,link_url:null}),o=b({files:[],banners:[]});return{new_form:t,order_form:o}},mounted(){}},N={class:"pt-4 md:px-6 px-4"},z=e("h1",{class:"mb-2 text-lg font-bold"},"\u30D0\u30CA\u30FC\u8A2D\u5B9A",-1),E=e("hr",{class:"mb-8"},null,-1),G={class:""},J={class:"m-auto min-w-full text-sm font-medium"},K={class:"border border-neutral-500"},T={class:"border-b"},q=e("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"\u30D0\u30CA\u30FC\u753B\u50CF",-1),P=["src"],Q={class:""},W=e("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"\u30D0\u30CA\u30FCURL",-1),X={class:""},Y=e("div",{class:"text-center py-2"},[e("button",{type:"submit",class:"w-28 bg-neutral-500 hover:bg-neutral-700 text-white text-sm font-normal py-2 px-5 rounded"}," \u767B\u9332 ")],-1),Z=e("hr",{class:"my-4"},null,-1),$={class:"text-center pb-2"},ee=e("div",{class:"border-b border-r border-l bg-neutral-300 p-2"}," \u30D0\u30CA\u30FC\u7DE8\u96C6 ",-1),te={class:"flex mb-1"},se={class:"flex-1 h-full border-r"},re={class:"flex"},ne={class:"flex-1"},oe=["onChange"],le=["src"],ie={class:"flex w-full"},ae={class:"flex-1"},ce=["onUpdate:modelValue"],de={class:"align-middle h-full flex items-center z-10 gap-1 p-2"},ue=["onClick"],_e=["onClick"],he=["onClick"],be={class:"p-1 flex justify-center"},fe=["disabled"],me=e("div",{class:"inline-block"},"\u4FDD\u5B58\u3059\u308B",-1),pe=[me];function ge(s,t,o,h,u,n){const v=i("Head"),x=i("ArrowLongUpIcon"),y=i("ArrowLongDownIcon"),k=i("draggable"),C=i("AppLayout");return a(),c(m,null,[d(v,{title:"\u30D0\u30CA\u30FC\u8A2D\u5B9A"}),d(C,null,{default:f(()=>[e("div",N,[z,E,e("div",G,[e("form",{onSubmit:t[2]||(t[2]=_(r=>n.submit(),["prevent"]))},[e("table",J,[e("tbody",K,[e("tr",T,[q,e("td",null,[e("input",{onChange:t[0]||(t[0]=r=>n.previewImage(r,-1)),ref:"file",type:"file",class:"w-full"},null,544),u.banner.image!=""?(a(),c("img",{key:0,src:u.banner.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,P)):p("",!0)])]),e("tr",Q,[W,e("td",X,[g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>u.banner.link_url=r),type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},null,512),[[w,u.banner.link_url]])])])])]),Y],32)]),Z,e("div",$,[ee,e("div",te,[d(k,{class:"w-full",list:o.banners,onChange:n.log},{default:f(()=>[(a(!0),c(m,null,j(o.banners,(r,L)=>(a(),c("div",{class:"my-1 text-left cursor-pointer border border-neutral-500 flex items-center hover:bg-white focus:bg-neutral-100 flex-wrap justify-center",key:r.id},[e("div",se,[e("div",re,[e("div",ne,[e("input",{onChange:l=>n.previewImage(l,L),ref_for:!0,ref:"photo",type:"file",class:"w-full"},null,40,oe),r.image!=""?(a(),c("img",{key:0,src:r.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,le)):p("",!0)])]),e("div",ie,[e("div",ae,[g(e("input",{"onUpdate:modelValue":l=>r.link_url=l,type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},null,8,ce),[[w,r.link_url]])])])]),e("div",de,[e("button",{onClick:_(l=>n.levelUp(r.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[d(x,{class:"w-5 h-5 text-white block"})],8,ue),e("button",{onClick:_(l=>n.levelDown(r.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[d(y,{class:"w-5 h-5 text-white block"})],8,_e),e("button",{onClick:l=>n.destroy(r.id),class:"bg-red-500 hover:bg-red-700 text-white text-sm font-normal py-1 px-2 rounded"},"\u524A\u9664",8,he)])]))),128))]),_:1},8,["list","onChange"])]),e("div",be,[e("button",{onClick:t[3]||(t[3]=_(r=>n.submit_order(),["prevent"])),class:V([{"opacity-25":h.order_form.processing},"w-28 bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-normal py-2 px-3 inline-block rounded"]),disabled:h.order_form.processing},pe,10,fe)])])])]),_:1})],64)}const Ce=B(H,[["render",ge]]);export{Ce as default};

import{H as B,L as V,G as v,r as m,o as a,c,b,w as x,F as h,d as e,f as g,i as U,e as y,t as o,n as w,J as p,K as C,h as _,a2 as L}from"./app.8a2c557b.js";import{A as H}from"./Admin.254ab498.js";import{P as O}from"./Pagination.2b18e24b.js";import{a as S,u as z}from"./useConfirm.609be1b6.js";import{_ as D}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as E}from"./ChevronRightIcon.ce2e52f3.js";import{r as F}from"./EllipsisHorizontalIcon.76173999.js";const{confirm:I}=z(),M={components:{Head:B,AppLayout:H,Link:V,ChevronLeftIcon:S,ChevronRightIcon:E,EllipsisHorizontalIcon:F,Pagination:O},props:{errors:Object,gacha:Object,category_share:Object,products:Object,search_cond:Object},data(){return{hasCheck:!1,main_tab:[{title:"\u767A\u9001\u4F9D\u983C\u4E2D",route_url:route("admin.delivery"),is_active:!0},{title:"\u767A\u9001\u6E08\u307F",route_url:route("admin.delivery.completed"),is_active:!1},{title:"\u53D6\u5F97\u6E08\u307F",route_url:route("admin.delivery.acquired"),is_active:!1}],page_step:0,is_busy:!1,profile:{},user_products:[],user:{},hasCheck:!1,isCheckAll:!1}},setup(r){const s=v(r.search_cond);return{form:v({user_id:0,checks:{},tracking_number:""}),form_search:s}},mounted(){window.addEventListener("popstate",this.handleBrowserBack)},beforeUnmount(){window.removeEventListener("popstate",this.handleBrowserBack)},methods:{handleBrowserBack(){this.page_step===1&&(this.page_step=0,history.pushState({page_step:0},"",window.location.href))},changeCheck(){let r,s=!1;for(this.isCheckAll=this.user_products.length>0,r=0;r<this.user_products.length;r++)this.form.checks["id"+this.user_products[r].id]?s=!0:this.isCheckAll=!1;this.hasCheck=s},showProductDetail(r){this.is_busy=!0;const s={user_id:r};axios.post(route("admin.delivery.product_data"),s).then(n=>{if((n.status==201||n.status==200)&&n.data.status){this.profile=n.data.profile,this.user=n.data.user,this.user_products=n.data.products,this.page_step=1,this.form.user_id=this.user.id,this.form.checks={},this.hasCheck=this.isCheckAll=!1;let i;for(i=0;i<this.user_products.length;i++)this.form.checks["id"+this.user_products[i].id]=!1;history.pushState({page_step:1},"",window.location.href)}this.is_busy=!1}).catch(n=>{this.is_busy=!0})},backToList(){this.page_step=0},submit(){this.hasCheck&&I("\u9078\u629E\u3057\u305F\u5546\u54C1\u3092\u767A\u9001\u3057\u307E\u3059\u304B?").then(r=>{r&&this.form.post(route("admin.delivery.post"),{onFinish:()=>{this.page_step=0}})})},search(){this.form_search.get(route("admin.delivery"))},checkall(){let r;for(this.hasCheck=!1,r=0;r<this.user_products.length;r++)this.form.checks["id"+this.user_products[r].id]=this.isCheckAll,this.hasCheck=this.isCheckAll}}},N={key:0,class:"pt-2 md:px-6 px-4 mb-6"},P={class:"w-full text-neutral-400 mb-3"},T={class:"flex items-center gap-2 w-full flex-wrap mb-2 py-2 justify-between text-sm"},q={class:"flex items-center gap-2 flex-1"},G={class:"mb-6 grid grid-cols-1 md:grid-cols-2"},J={key:0,class:"-mx-4 my-2 col-span-1 md:col-span-2"},K={key:1,class:"relative border-neutral-600 border-l-8 border-b border w-full py-3 px-4 my-1 -ml-1 hover:bg-slate-100 col-span-1 md:col-span-2 shadow gap-3"},R={class:"flex-1 min-w-0"},Q={class:"text-sm font-medium text-gray-900 truncate"},W={class:"text-xs text-gray-500 truncate"},X={class:"text-xs text-gray-600 truncate"},Y={class:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center sm:w-auto"},Z=e("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),$=["onClick"],ee=["src"],te={class:"cursor-pointer min-h-20 flex items-center justify-between flex-1 text-xs py-1 px-2 my-0.5"},se={class:"text-left"},oe={class:"text-red-500"},re={key:1,class:"pt-6 md:px-6 px-4 mb-6"},le={class:"flex justify-between items-center"},ie=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u5546\u54C1\u8A73\u7D30",-1),ne={class:"text-center"},ae={class:"cursor-pointer flex items-center"},ce=e("span",{class:"ml-2"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),de=e("hr",{class:"mb-3"},null,-1),ue={class:"mb-6 grid grid-cols-1 md:grid-cols-2"},he={class:"flex items-center"},_e=["for"],pe=["src"],fe={class:"cursor-pointer h-20 flex items-center justify-between flex-1 text-xs py-1 px-2 my-0.5"},me={class:"text-left"},be={class:"text-red-500"},xe=["id","onUpdate:modelValue"],ge=e("div",{class:"mb-1 text-base font-semibold"},"\u914D\u9001\u5148\u60C5\u5831",-1),we=e("hr",{class:"mb-3"},null,-1),ke={class:"w-full mb-6"},ve={class:"w-full text-sm"},ye=e("td",{class:"p-1 w-2/5 font-bold"},"\u30A2\u30C9\u30EC\u30B9",-1),Ce={class:"p-1 w-3/5"},Le=e("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D",-1),je={class:"p-1 w-3/5"},Ae=e("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D(\u30AB\u30CA)",-1),Be={class:"p-1 w-3/5"},Ve=e("td",{class:"p-1 w-2/5 font-bold"},"\u90F5\u4FBF\u756A\u53F7",-1),Ue={class:"p-1 w-3/5"},He=e("td",{class:"p-1 w-2/5 font-bold"},"\u90FD\u9053\u5E9C\u770C",-1),Oe={class:"p-1 w-3/5"},Se=e("td",{class:"p-1 w-2/5 font-bold"},"\u4F4F\u6240",-1),ze={class:"p-1 w-3/5"},De=e("td",{class:"p-1 w-2/5 font-bold"},"\u96FB\u8A71\u756A\u53F7",-1),Ee={class:"p-1 w-3/5"},Fe=e("td",{class:"p-1 w-2/5 font-bold"},"\u8FFD\u8DE1\u756A\u53F7",-1),Ie={class:"p-1 w-3/5"},Me={class:"mb-6 w-full text-center"},Ne=["disabled"],Pe=["disabled"];function Te(r,s,n,i,l,d){const j=m("Head"),k=m("Link"),A=m("AppLayout");return a(),c(h,null,[b(j,{title:"\u914D\u9001\u5546\u54C1"}),b(A,null,{default:x(()=>[l.page_step==0?(a(),c("div",N,[e("div",P,[(a(!0),c(h,null,g(l.main_tab,(t,u)=>(a(),U(k,{href:t.route_url,class:w(["inline-block px-4 py-1.5",{"border-b-2 border-red-600 text-red-600":t.is_active}])},{default:x(()=>[y(o(t.title),1)]),_:2},1032,["href","class"]))),256))]),e("div",T,[e("div",q,[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.form_search.name=t),type:"text",placeholder:"\u540D\u524D\u3001\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3001\u96FB\u8A71\u756A\u53F7\u3001\u5546\u54C1\u540D",class:"h-9 flex-1 w-0 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300"},null,512),[[C,i.form_search.name]])]),e("button",{type:"button",onClick:s[1]||(s[1]=(...t)=>d.search&&d.search(...t)),class:"rounded-md border bg-neutral-600 text-white px-4 py-2"},"\u691C\u7D22")]),e("div",G,[(a(!0),c(h,null,g(n.products.data,(t,u)=>(a(),c(h,null,[u>0&&n.products.data[u-1].user_id!=t.user_id?(a(),c("hr",J)):_("",!0),u==0||n.products.data[u-1].user_id!=t.user_id?(a(),c("div",K,[e("div",R,[e("div",Q,o(t.user_name),1),e("div",W,o(t.email),1),e("div",X,o(t.address),1)]),e("div",Y,[b(k,{href:r.route("admin.users.detail",t.user_id),class:"inline-flex items-center justify-center w-full sm:w-auto -my-1 px-3 py-2 text-xs sm:text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg shadow-sm hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105"},{default:x(()=>[Z,y(" \u8A73\u7D30 ")]),_:2},1032,["href"])])])):_("",!0),e("button",{onClick:f=>d.showProductDetail(t.user_id),class:"flex border-neutral-200 items-center w-full hover:bg-slate-100 py-0.5"},[e("img",{src:t.image,class:"w-20 h-20 inline-block object-contain"},null,8,ee),e("div",te,[e("div",se,[e("div",null,o(t.name),1),e("div",null,o(t.rare),1),e("div",oe,o(t.point.toLocaleString())+"pt",1),e("div",null,o(t.updated_at),1)])])],8,$)],64))),256))])])):_("",!0),l.page_step==1?(a(),c("div",re,[e("div",le,[ie,e("div",ne,[e("label",ae,[p(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=t=>l.isCheckAll=t),onChange:s[3]||(s[3]=t=>d.checkall()),class:"h-5 w-5 rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500"},null,544),[[L,l.isCheckAll]]),ce])])]),de,e("div",ue,[(a(!0),c(h,null,g(l.user_products,(t,u)=>(a(),c("div",he,[e("label",{for:"checkbox"+t.id,class:"flex border-neutral-200 items-center w-full hover:bg-slate-100 px-2 py-0.5"},[e("img",{src:t.image,class:"w-20 h-20 inline-block object-contain"},null,8,pe),e("div",fe,[e("div",me,[e("div",null,o(t.name),1),e("div",null,o(t.rare),1),e("div",be,o(t.point.toLocaleString())+"pt",1),e("div",null,o(t.updated_at),1)])]),p(e("input",{id:"checkbox"+t.id,"onUpdate:modelValue":f=>i.form.checks["id"+t.id]=f,type:"checkbox",onChange:s[4]||(s[4]=f=>d.changeCheck()),class:"cursor-pointer rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500 m-1"},null,40,xe),[[L,i.form.checks["id"+t.id]]])],8,_e)]))),256))]),ge,we,e("div",ke,[e("table",ve,[e("tr",null,[ye,e("td",Ce,o(l.user.email),1)]),l.profile?(a(),c(h,{key:0},[e("tr",null,[Le,e("td",je,o(l.profile.first_name)+" "+o(l.profile.last_name),1)]),e("tr",null,[Ae,e("td",Be,o(l.profile.first_name_gana)+" "+o(l.profile.last_name_gana),1)]),e("tr",null,[Ve,e("td",Ue,o(l.profile.postal_code),1)]),e("tr",null,[He,e("td",Oe,o(l.profile.prefecture),1)]),e("tr",null,[Se,e("td",ze,o(l.profile.address),1)]),e("tr",null,[De,e("td",Ee,o(l.profile.phone),1)]),e("tr",null,[Fe,e("td",Ie,[p(e("input",{type:"text",id:"tracking_number","onUpdate:modelValue":s[5]||(s[5]=t=>i.form.tracking_number=t),class:"h-10 rounded-sm w-full px-3 py-1 border border-sky-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50"},null,512),[[C,i.form.tracking_number]])])])],64)):_("",!0)])]),e("div",Me,[e("button",{type:"button",onClick:s[6]||(s[6]=t=>d.backToList()),class:w([{"opacity-25":i.form.processing},"inline-block items-center px-8 py-2.5 bg-neutral-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 m-1"]),disabled:i.form.processing}," \u30EA\u30B9\u30C8\u3078 ",10,Ne),e("button",{type:"button",onClick:s[7]||(s[7]=t=>d.submit()),class:w([{"opacity-25":i.form.processing},"inline-block items-center px-8 py-2.5 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150 m-1"]),disabled:i.form.processing}," \u914D\u9001\u6E08\u307F\u306B\u3059\u308B ",10,Pe)])])):_("",!0)]),_:1})],64)}const Xe=D(M,[["render",Te]]);export{Xe as default};

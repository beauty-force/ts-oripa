import{o as c,c as d,d as e,H as A,L,G as _,r as u,b as h,w as b,F as g,e as a,t as i,J as m,K as j,M as I,a2 as w,n as M,h as N,f as V}from"./app.0cc3647d.js";import{A as T}from"./Admin.0efb722a.js";import{P as B}from"./Pagination.e97a61db.js";import{u as P}from"./useConfirm.ee4d26af.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as H}from"./TrashIcon.32ca2c2f.js";import"./ChevronRightIcon.1cfd03d3.js";import"./EllipsisHorizontalIcon.5a355953.js";function F(o,t){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function O(o,t){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])}const{confirm:x}=P(),D={components:{Head:A,AppLayout:T,Link:L,Pagination:B,EyeIcon:O,TrashIcon:H,CheckCircleIcon:F},props:{errors:Object,users:Object,search_cond:Object,total:Number,total_point:Number,total_purchase:Number,total_invite:Number},data(){return{selectedUsers:[],selectAll:!1}},mounted(){},methods:{search(){this.form_search.get(route("admin.users"))},toggleSelectAll(){this.selectAll?this.selectedUsers=this.users.filter(o=>o.status!==0).map(o=>o.id):this.selectedUsers=[]},deleteSelectedUsers(){if(this.selectedUsers.length===0)return;const o=this.selectedUsers.length;x(`\u9078\u629E\u3057\u305F${o}\u4EBA\u306E\u30E6\u30FC\u30B6\u30FC\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F`,"\u7372\u5F97\u3057\u305F\u5546\u54C1\u3068\u767A\u9001\u4F9D\u983C\u4E2D\u306E\u5546\u54C1\u306F\u5168\u3066\u56DE\u53CE\u3055\u308C\u307E\u3059\u3002\u3053\u306E\u64CD\u4F5C\u306F\u53D6\u308A\u6D88\u305B\u307E\u305B\u3093\u3002","warning").then(t=>{t&&_({user_ids:this.selectedUsers,status:0}).post(route("admin.users.update"),{onSuccess:()=>{this.selectedUsers=[],this.selectAll=!1}})})},updateStatus(o,t){t==0?x("\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30D6\u30ED\u30C3\u30AF\u3057\u307E\u3059\u304B\uFF1F","\u7372\u5F97\u3057\u305F\u5546\u54C1\u3068\u767A\u9001\u4F9D\u983C\u4E2D\u306E\u5546\u54C1\u306F\u5168\u3066\u56DE\u53CE\u3055\u308C\u307E\u3059\u3002","warning").then(r=>{r&&_({id:o,status:t}).post(route("admin.users.update"))}):x("\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u627F\u8A8D\u3057\u307E\u3059\u304B\uFF1F").then(r=>{r&&_({id:o,status:t}).post(route("admin.users.update"))})},format_number(o){return o==null?0:String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")}},watch:{selectedUsers(o){const t=this.users.filter(r=>r.status!==0);this.selectAll=o.length===t.length&&t.length>0}},setup(o){return{form_search:_(o.search_cond)}}},E={class:"md:px-4 px-2"},G={class:"border-b w-full p-2 my-2 font-semibold flex justify-between flex-wrap items-start gap-3 text-xs sm:text-sm md:text-base"},J={class:"flex gap-1 flex-col"},K={class:"font-normal flex gap-1"},q={class:"font-bold"},Q={class:"font-normal flex gap-1"},R={class:"font-bold"},W={class:"font-normal flex gap-1"},X={class:"font-bold"},Y={class:"w-full flex flex-col gap-4 mb-8"},Z={class:"w-full flex justify-between gap-4"},$={class:"flex-1 flex flex-wrap gap-2"},ee=e("option",{value:"amount"},"\u8CFC\u5165\u91D1\u984D",-1),te=e("option",{value:"point"},"\u30DD\u30A4\u30F3\u30C8",-1),se=e("option",{value:"status"},"\u72B6\u614B",-1),oe=[ee,te,se],re={class:"flex gap-2"},ne={class:"w-full overflow-auto"},le={class:"min-w-full"},ae={class:"border-b border-collapse border-sky-100 whitespace-nowrap"},ce={class:"text-center py-2 px-2"},de=e("th",{class:"text-center py-2"},"\u30E6\u30FC\u30B6\u30FC\u540D",-1),ie=e("th",{class:"text-center py-2"},"\u8CFC\u5165\u91D1\u984D",-1),ue=e("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8",-1),he={class:"text-center py-2 w-24 sm:w-28"},pe=["disabled"],_e={key:0},me={class:"text-sm"},fe={class:"border border-sky-100 divide-x-2 divide-sky-50 border-collapse"},xe={class:"text-center py-2 px-2"},be=["value","disabled"],ge={class:"text-center py-2 px-1 text-red-600 text-nowrap"},we={class:"text-center py-2 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},ye={class:"text-center py-2 px-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},ke={class:"text-center py-1 whitespace-nowrap"},ve=["onClick"],Ce=["onClick"];function Ue(o,t,r,p,l,n){const y=u("Head"),k=u("Link"),v=u("TrashIcon"),C=u("CheckCircleIcon"),U=u("Pagination"),S=u("AppLayout");return c(),d(g,null,[h(y,{title:"\u30E6\u30FC\u30B6\u30FC\u7BA1\u7406"}),h(S,null,{default:b(()=>[e("div",E,[e("div",G,[e("div",J,[e("span",K,[a("\u5408\u8A08\u30DD\u30A4\u30F3\u30C8: "),e("span",q,i(r.total_point.toLocaleString()),1),a("PT")]),e("span",Q,[a("\u5408\u8A08\u8CFC\u5165\u91D1\u984D: "),e("span",R,i(r.total_purchase.toLocaleString()),1),a("\u5186")])]),e("span",W,[a("\u62DB\u5F85\u30B3\u30FC\u30C9\u306E\u7DCF\u4F7F\u7528\u56DE\u6570: "),e("span",X,i(r.total_invite.toLocaleString()),1),a("\u56DE")])]),e("div",Y,[e("div",Z,[e("div",$,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.form_search.keyword=s),type:"text",class:"text-sm flex-1 md:min-w-96 border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"\u30E6\u30FC\u30B6\u30FC\u540D\u3001\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3001\u96FB\u8A71\u756A\u53F7\u3092\u5165\u529B\u3057\u307E\u3059\u3002"},null,512),[[j,p.form_search.keyword]]),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>p.form_search.order_by=s),id:"order_by",class:"bg-white/90 flex-1 px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400"},oe,512),[[I,p.form_search.order_by]])]),e("div",re,[e("button",{type:"button",onClick:t[2]||(t[2]=(...s)=>n.search&&n.search(...s)),class:"rounded-md border bg-neutral-600 text-white px-4 py-1"},"\u691C\u7D22")])]),e("div",ne,[e("table",le,[e("thead",null,[e("tr",ae,[e("th",ce,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>l.selectAll=s),onChange:t[4]||(t[4]=(...s)=>n.toggleSelectAll&&n.toggleSelectAll(...s)),class:"rounded border-neutral-300 text-sky-600 shadow-sm focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50"},null,544),[[w,l.selectAll]])]),de,ie,ue,e("th",he,[e("button",{type:"button",onClick:t[5]||(t[5]=(...s)=>n.deleteSelectedUsers&&n.deleteSelectedUsers(...s)),disabled:l.selectedUsers.length===0,class:M(["rounded-md border px-4 py-1 transition-colors text-sm",l.selectedUsers.length>0?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[a(" \u524A\u9664 "),l.selectedUsers.length>0?(c(),d("span",_e,"("+i(l.selectedUsers.length)+")",1)):N("",!0)],10,pe)])])]),e("tbody",me,[(c(!0),d(g,null,V(r.users,s=>(c(),d("tr",fe,[e("td",xe,[m(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[6]||(t[6]=f=>l.selectedUsers=f),disabled:s.status===0,class:"rounded border-neutral-300 text-sky-600 shadow-sm focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 disabled:opacity-40 disabled:cursor-not-allowed"},null,8,be),[[w,l.selectedUsers]])]),e("td",ge,[h(k,{class:"text-base",href:o.route("admin.users.detail",{id:s.id})},{default:b(()=>[a(i(s.name),1)]),_:2},1032,["href"])]),e("td",we,i(n.format_number(s.amount)),1),e("td",ye,i(s.point.toLocaleString())+" pt",1),e("td",ke,[s.status?(c(),d("button",{key:0,onClick:f=>n.updateStatus(s.id,0),class:"px-2 py-1 rounded-md border text-rose-500 hover:text-white hover:bg-rose-400"},[h(v,{class:"w-5 h-5"})],8,ve)):(c(),d("button",{key:1,onClick:f=>n.updateStatus(s.id,1),class:"px-2 py-1 rounded-md border text-sky-500 hover:text-white hover:bg-sky-400"},[h(C,{class:"w-5 h-5"})],8,Ce))])]))),256))])])]),h(U,{search_cond:r.search_cond,route_name:"admin.users",total:r.total},null,8,["search_cond","total"])])])]),_:1})],64)}const Te=z(D,[["render",Ue]]);export{Te as default};

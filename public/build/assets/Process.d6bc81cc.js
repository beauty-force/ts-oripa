import{H as k,L as y,G as w,r as d,o as l,c,b as u,w as h,F as v,d as t,J as p,K as m,t as o,I as S,e as a,h as j}from"./app.624bb9fb.js";import{A as P}from"./UserLayout.0980f043.js";import{u as A}from"./useConfirm.06b7c344.js";import{_ as C}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.5ba01e3a.js";const{confirm:B}=A(),N={components:{Head:k,AppLayout:P,Link:y},props:{errors:Object,auth:Object,checkout:Object,point:Object,bank_info:Object,link_url:String,amount:Number,coupon_id:Number,merchant_id:String,public_key_id:String,payload:Object,signature:String,checkoutSessionId:String},data(){return{purchase_bank_uri:"user.point.purchase_bank",purchase_uri:"user.point",is_processing:!0}},mounted(){if(this.checkout)window.location.replace(this.checkout.url);else if(this.link_url)window.location.replace(this.link_url);else{const e=document.createElement("script");e.src="https://static-fe.payments-amazon.com/checkout.js",e.onload=this.renderAmazonPayButton,document.head.appendChild(e)}this.auth.user&&this.auth.user.type==1&&(this.is_admin=!0,this.purchase_bank_uri="test.user.point.purchase_bank",this.purchase_uri="test.user.point")},methods:{format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},makeBankPayment(){B("\u9280\u884C\u53E3\u5EA7\u60C5\u5831\u3092\u6B63\u78BA\u306B\u5165\u529B\u3057\u307E\u3057\u305F\u304B\uFF1F").then(e=>{e&&this.form.post(route(this.purchase_bank_uri,{id:this.point.id,coupon_id:this.coupon_id}),{preserveScroll:!0,onFinish:()=>{}})})},back(){window.history.back()},renderAmazonPayButton(){this.is_processing=!1,amazon.Pay.renderButton("#AmazonPayButton",{merchantId:this.merchant_id,publicKeyId:this.public_key_id,ledgerCurrency:"JPY",checkoutLanguage:"ja_JP",productType:"PayOnly",placement:"Checkout",buttonColor:"Gold",buttonWidth:"300px",buttonHeight:"50px",createCheckoutSessionConfig:{payloadJSON:JSON.stringify(this.payload),signature:this.signature,algorithm:"AMZN-PAY-RSASSA-PSS-V2"}})}},setup(e){return{form:w({point_id:e.point.id,account:"",bank_name:""})}}},O={key:0,class:"w-max max-w-full mx-auto flex flex-col items-center px-4"},L=t("h3",{class:"text-center my-5 font-bold text-lg underline underline-offset-4"},"\u9280\u884C\u632F\u308A\u8FBC\u307F\u306E\u6D41\u308C",-1),V={class:"border p-5 rounded-lg w-full flex flex-col items-center gap-4"},z=t("div",{class:"flex w-full"},[t("span",null,[t("strong",null,"1")]),t("p",{class:"ml-3 indent-1"},"\u632F\u308A\u8FBC\u307F\u5143\u53E3\u5EA7\u60C5\u5831\u306E\u5165\u529B")],-1),H={class:"flex flex-col gap-2"},J={class:"form-group flex items-center gap-2"},F=t("label",{for:"account",class:"w-20 block text-right"},[a("\u53E3\u5EA7\u540D\u7FA9 "),t("span",{class:"text-red-500"},"*")],-1),I={class:"form-group flex items-center gap-2"},M=t("label",{for:"bank_name",class:"w-20 block text-right"},[a("\u9280\u884C\u540D "),t("span",{class:"text-red-500"},"*")],-1),T={class:"text-center"},D=["src"],E={class:"border p-5 rounded-lg w-full flex flex-col items-center gap-4"},G=t("div",{class:"flex w-full"},[t("span",null,[t("strong",null,"2")]),t("p",{class:"ml-3 indent-1"},"\u9280\u884C\u632F\u308A\u8FBC\u307F")],-1),K={class:"text-center w-full flex flex-col gap-1"},U={class:"flex justify-start"},Y=t("span",{class:"font-bold text-right pr-8 w-2/5"},"\u9280\u884C\u540D",-1),R={class:"flex justify-start"},W=t("span",{class:"font-bold text-right pr-8 w-2/5"},"\u652F\u5E97\u30B3\u30FC\u30C9",-1),Z={class:"flex justify-start"},q=t("span",{class:"font-bold text-right pr-8 w-2/5"},"\u652F\u5E97\u540D",-1),Q={class:"flex justify-start"},X=t("span",{class:"font-bold text-right pr-8 w-2/5"},"\u53E3\u5EA7\u7A2E\u985E",-1),$={class:"flex justify-start"},tt=t("span",{class:"font-bold text-right pr-8 w-2/5"},"\u53E3\u5EA7\u540D\u7FA9",-1),et={class:""},st={class:"flex justify-start"},nt=t("span",{class:"font-bold text-right pr-8 w-2/5"},"\u53E3\u5EA7\u756A\u53F7",-1),ot={class:"flex justify-start"},at=t("span",{class:"font-bold text-right pr-8 w-2/5"},"\u91D1\u984D",-1),it={class:"text-center"},rt=["src"],lt=t("div",{class:"border p-5 rounded-lg w-full flex"},[t("span",null,[t("strong",null,"3")]),t("p",{class:"ml-3 indent-1"},[a("\u904B\u55B6\u304C\u632F\u308A\u8FBC\u307F\u78BA\u8A8D\u5F8C\u3001 \u30DD\u30A4\u30F3\u30C8\u306E\u8CFC\u5165\u5B8C\u4E86"),t("br"),a("\u30DD\u30A4\u30F3\u30C8\u53CD\u6620\u307E\u3067\u304A\u6642\u9593\u304C\u304B\u304B\u308B\u5834\u5408\u304C\u3054\u3056\u3044\u307E\u3059\u3002")])],-1),ct=t("br",null,null,-1),dt={class:"mb-6 flex flex-wrap justify-center gap-2"},ut=t("span",null,"\u5B8C\u4E86",-1),_t=[ut],ht=t("br",null,null,-1),pt={key:1,class:"text-center rounded-md flex justify-center"},mt={key:0,class:"mt-8 mb-8 text-center"},ft=t("div",{id:"AmazonPayButton",class:"mt-8"},null,-1);function bt(e,n,s,i,f,_){const b=d("Head"),x=d("Link"),g=d("AppLayout");return l(),c(v,null,[u(b,{title:"\u6C7A\u6E08"}),u(g,null,{default:h(()=>[s.bank_info?(l(),c("div",O,[L,t("div",V,[z,t("form",H,[t("div",J,[F,p(t("input",{type:"text",class:"rounded-md",id:"account",placeholder:"\u53E3\u5EA7\u540D\u7FA9","onUpdate:modelValue":n[0]||(n[0]=r=>i.form.account=r)},null,512),[[m,i.form.account]])]),t("div",I,[M,p(t("input",{type:"text",class:"rounded-md",id:"bank_name",placeholder:"\u9280\u884C\u540D","onUpdate:modelValue":n[1]||(n[1]=r=>i.form.bank_name=r)},null,512),[[m,i.form.bank_name]])])])]),t("div",T,[t("img",{src:"/images/arrow_down.png",class:"h-10"},null,8,D)]),t("div",E,[G,t("div",K,[t("div",U,[Y,t("span",null,o(s.bank_info.bank_name),1)]),t("div",R,[W,t("span",null,o(s.bank_info.branch_code),1)]),t("div",Z,[q,t("span",null,o(s.bank_info.branch_name),1)]),t("div",Q,[X,t("span",null,o(s.bank_info.account_type),1)]),t("div",$,[tt,t("span",et,o(s.bank_info.holder_name),1)]),t("div",st,[nt,t("span",null,o(s.bank_info.account_number),1)]),t("div",ot,[at,t("span",null,"\xA5 "+o(_.format_number(s.amount)),1)])])]),t("div",it,[t("img",{src:"/images/arrow_down.png",class:"h-10"},null,8,rt)]),lt,ct,t("div",dt,[t("button",{class:"px-8 py-2 rounded-md hover:bg-sky-100 border border-sky-500 text-sky-600",onClick:n[2]||(n[2]=S(r=>_.makeBankPayment(),["prevent"]))},_t),ht,u(x,{href:e.route(f.purchase_uri),class:"px-8 py-2 rounded-md hover:bg-rose-100 border border-rose-500 text-rose-600"},{default:h(()=>[a(" \u623B\u308B ")]),_:1},8,["href"])])])):(l(),c("div",pt,[s.merchant_id?j("",!0):(l(),c("div",mt," \u51E6\u7406\u4E2D\u3067\u3059\u3002 ")),ft]))]),_:1})],64)}const vt=C(N,[["render",bt]]);export{vt as default};

import{r as f,o as c,c as a,h as u,b as _,t as n,d as t,n as w,H as P,L as j,G as p,w as S,F as m,J as L,K as I,f as g}from"./app.e99621f8.js";import{A as F}from"./Admin.866688c4.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as H}from"./ChevronRightIcon.00d0eeca.js";import{a as O,u as T}from"./useConfirm.1983d4a9.js";import{r as N}from"./EllipsisHorizontalIcon.b1c25758.js";import{r as z}from"./TrashIcon.11a9bebf.js";const A={components:{ChevronRightIcon:H,ChevronLeftIcon:O,EllipsisHorizontalIcon:N},props:{callback:Function,total:Number},data(){return{page:1}},methods:{}},D={key:0,class:"flex justify-center items-center"},E={key:1,class:"p-2"},M={key:4,class:"p-2"};function V(o,s,e,d,r,i){const h=f("EllipsisHorizontalIcon");return e.total>1?(c(),a("div",D,[r.page>1?(c(),a("button",{key:0,onClick:s[0]||(s[0]=()=>{e.callback(r.page=1)}),class:"rounded-l-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},"1")):u("",!0),r.page>3?(c(),a("span",E,[_(h,{class:"w-5"})])):u("",!0),r.page>2?(c(),a("button",{key:2,onClick:s[1]||(s[1]=()=>{e.callback(r.page=r.page-1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},n(r.page-1),1)):u("",!0),t("button",{onClick:s[2]||(s[2]=()=>{e.callback(r.page)}),class:w(["w-9 h-9 flex justify-center items-center text-white bg-neutral-600",{"rounded-l-md":r.page==1,"rounded-r-md":r.page==e.total}])},n(r.page),3),r.page+1<e.total?(c(),a("button",{key:3,onClick:s[3]||(s[3]=()=>{e.callback(r.page=r.page+1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},n(r.page+1),1)):u("",!0),r.page+2<e.total?(c(),a("span",M,[_(h,{class:"w-5"})])):u("",!0),r.page<e.total?(c(),a("button",{key:5,onClick:s[4]||(s[4]=()=>{e.callback(r.page=e.total)}),class:"rounded-r-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},n(e.total),1)):u("",!0)])):u("",!0)}const B=k(A,[["render",V]]),{confirm:x}=T(),J={components:{Head:P,AppLayout:F,Link:j,PaginationClientSide:B,TrashIcon:z},props:{errors:Object,user:Object,profile:Object,payments:Object,coupons:Object,point_logs:Object,show_limit:Number,rank:String},mounted(){},methods:{submit(){this.form.post(route("admin.users.update"),{preserveScroll:!0,onFinish:()=>{}})},clear_history(){x("\u30DD\u30A4\u30F3\u30C8\u5C65\u6B74\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F \u671F\u9593\u30E9\u30F3\u30AF\u30C7\u30FC\u30BF\u304C\u521D\u671F\u5316\u3055\u308C\u307E\u3059\u3002").then(o=>{o&&this.clear_form.post(route("admin.users.clear_history"),{preserveScroll:!0,onFinish:()=>{}})})},format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},onPageChange(o){this.current_page=o},onPageChange1(o){this.current_page1=o},onPageChange2(o){this.current_page2=o},add_point(o){p({id:this.user.id,point:o}).post(route("admin.users.add_point"),{preserveScroll:!0,onFinish:()=>{this.form.point=this.user.point}})},updateStatus(o,s){s==0?x("\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30D6\u30ED\u30C3\u30AF\u3057\u307E\u3059\u304B\uFF1F","\u7372\u5F97\u3057\u305F\u5546\u54C1\u3068\u767A\u9001\u4F9D\u983C\u4E2D\u306E\u5546\u54C1\u306F\u5168\u3066\u56DE\u53CE\u3055\u308C\u307E\u3059\u3002","warning").then(e=>{e&&p({id:o,status:s}).post(route("admin.users.update"))}):x("\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u627F\u8A8D\u3057\u307E\u3059\u304B\uFF1F").then(e=>{e&&p({id:o,status:s}).post(route("admin.users.update"))})}},data(){return{current_page:1,current_page1:1,current_page2:1}},setup(o){const s=p({id:o.user.id,point:o.user.point}),e=p({id:o.user.id}),d=10,r=Math.floor((o.point_logs.length+o.show_limit-1)/o.show_limit),i=Math.floor((o.payments.length+d-1)/d),h=Math.floor((o.coupons.length+d-1)/d);return{form:s,totalPage:r,clear_form:e,totalPage1:i,totalPage2:h,show_limit1:d}},computed:{paginatedLogs(){const o=(this.current_page-1)*this.show_limit,s=this.current_page*this.show_limit;return this.point_logs.slice(o,s)},paginatedPayments(){const o=(this.current_page1-1)*this.show_limit1,s=this.current_page1*this.show_limit1;return this.payments.slice(o,s)},paginatedCoupons(){const o=(this.current_page2-1)*this.show_limit1,s=this.current_page2*this.show_limit1;return this.coupons.slice(o,s)}}},G={class:"md:px-4 px-2"},K={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},R=t("button",{onclick:"history.back()",class:"rounded-md px-2 text-sm font-normal text-white bg-red-500 hover:bg-red-400"}," \u623B\u308B ",-1),U={class:"w-full text-sm leading-7 mb-6"},Y=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",-1),q={class:"p-1 w-3/5"},Q=t("td",{class:"p-1 w-2/5 font-bold"},"\u96FB\u8A71\u756A\u53F7",-1),W={class:"p-1 w-3/5"},X=t("td",{class:"p-1 w-2/5 font-bold"},"\u30DD\u30A4\u30F3\u30C8",-1),Z={class:"p-1 flex flex-wrap items-center justify-between gap-2"},$={class:"border border-sky-500 rounded-full p-0.5 text-sm"},tt=["disabled"],et=t("td",{class:"p-1 w-2/5 font-bold"},"\u6D88\u8CBBPT",-1),st={class:"p-1 w-3/5"},ot=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D",-1),nt={class:"p-1 w-3/5"},lt=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D(\u30AB\u30CA)",-1),rt={class:"p-1 w-3/5"},ct=t("td",{class:"p-1 w-2/5 font-bold"},"\u90F5\u4FBF\u756A\u53F7",-1),at={class:"p-1 w-3/5"},it=t("td",{class:"p-1 w-2/5 font-bold"},"\u90FD\u9053\u5E9C\u770C",-1),dt={class:"p-1 w-3/5"},ut=t("td",{class:"p-1 w-2/5 font-bold"},"\u4F4F\u6240",-1),_t={class:"p-1 w-3/5"},ht=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E9\u30F3\u30AF",-1),mt={class:"p-1 w-3/5"},pt=t("td",{class:"p-1 w-2/5 font-bold"},"\u62DB\u5F85\u30B3\u30FC\u30C9",-1),ft={class:"p-1 w-3/5"},bt={key:0},gt=t("td",{class:"p-1 w-2/5 font-bold"},"\u30A2\u30AB\u30A6\u30F3\u30C8\u627F\u8A8D",-1),xt={class:"p-1 w-3/5"},yt={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},wt=t("h3",null,"\u5165\u91D1\u5C65\u6B74",-1),kt={class:"w-full flex flex-col gap-4 mb-8 text-xs md:text-sm"},vt={class:"w-full table-auto"},Ct=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u91D1\u984D"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8"),t("th",{class:"text-center py-2"},"\u5229\u7528\u30AF\u30FC\u30DD\u30F3"),t("th",{class:"text-center py-2"},"\u8CFC\u5165\u6642\u9593")])],-1),Pt={class:"text-sm"},jt={class:"border divide-x-2"},St={class:"text-center py-2"},Lt={class:"text-center py-2"},It={class:"text-center py-2"},Ft={class:"text-center py-2"},Ht={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},Ot=t("h3",null,"\u30AF\u30FC\u30DD\u30F3\u4F7F\u7528\u5C65\u6B74",-1),Tt={class:"w-full flex flex-col gap-4 mb-8 text-xs md:text-sm"},Nt={class:"w-full table-auto"},zt=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u540D\u524D"),t("th",{class:"text-center py-2"},"\u30B3\u30FC\u30C9"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8"),t("th",{class:"text-center py-2"},"\u4F7F\u7528\u6642\u9593")])],-1),At={class:"text-sm"},Dt={class:"border divide-x-2"},Et={class:"text-center py-2"},Mt={class:"text-center py-2"},Vt={class:"text-center py-2"},Bt={class:"text-center py-2"},Jt={class:"border-b w-full p-2 my-2 font-semibold flex justify-between items-center"},Gt=t("h3",null,"\u30DD\u30A4\u30F3\u30C8\u5C65\u6B74",-1),Kt={class:"w-full flex flex-col gap-4 mb-8 text-xs md:text-sm overflow-auto"},Rt={class:"min-w-full table-auto"},Ut=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u4E8B\u7531"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8\uFF08\u5229\u7528\uFF09"),t("th",{class:"text-center py-2"},"\u6B21\u306E\u30DD\u30A4\u30F3\u30C8\uFF08PT\u6B8B\u9AD8\uFF09"),t("th",{class:"text-center py-2"},"\u65E5\u6642")])],-1),Yt={class:"text-sm"},qt={class:"border divide-x-2"},Qt={class:"text-center py-2"},Wt={class:"text-center py-2"},Xt={class:"text-center py-2"},Zt={class:"text-center py-2"};function $t(o,s,e,d,r,i){const h=f("Head"),v=f("TrashIcon"),b=f("PaginationClientSide"),C=f("AppLayout");return c(),a(m,null,[_(h,{title:"\u30E6\u30FC\u30B6\u30FC\u7BA1\u7406"}),_(C,null,{default:S(()=>[t("div",G,[t("div",K,[t("h3",null,"\u30E6\u30FC\u30B6\u30FC\u8A73\u7D30 (ID-"+n(e.user.id)+")",1),R]),t("table",U,[e.user?(c(),a(m,{key:0},[t("tr",null,[Y,t("td",q,n(e.user.email),1)]),t("tr",null,[Q,t("td",W,n(e.profile?e.profile.phone:e.user.phone),1)]),t("tr",null,[X,t("td",Z,[L(t("input",{class:"bg-white/90 flex-1 max-w-32 px-3 py-1 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400",type:"number","onUpdate:modelValue":s[0]||(s[0]=l=>d.form.point=l)},null,512),[[I,d.form.point]]),t("div",$,[t("button",{type:"button",onClick:s[1]||(s[1]=(...l)=>i.submit&&i.submit(...l)),class:w([{"opacity-25":d.form.processing},"inline-block items-center px-10 py-1 rounded-full font-semibold text-white uppercase bg-theme bg-theme-hover"]),disabled:d.form.processing}," \u4FDD\u5B58 ",10,tt)])])]),t("tr",null,[et,t("td",st,n(e.user.consume_point.toLocaleString()),1)])],64)):u("",!0),e.profile?(c(),a(m,{key:1},[t("tr",null,[ot,t("td",nt,n(e.profile.first_name)+" "+n(e.profile.last_name),1)]),t("tr",null,[lt,t("td",rt,n(e.profile.first_name_gana)+" "+n(e.profile.last_name_gana),1)]),t("tr",null,[ct,t("td",at,n(e.profile.postal_code),1)]),t("tr",null,[it,t("td",dt,n(e.profile.prefecture),1)]),t("tr",null,[ut,t("td",_t,n(e.profile.address),1)]),t("tr",null,[ht,t("td",mt,n(e.rank),1)]),t("tr",null,[pt,t("td",ft,n(e.user.invite_code),1)]),e.user.type!=1?(c(),a("tr",bt,[gt,t("td",xt,[e.user.status?(c(),a("button",{key:0,onClick:s[2]||(s[2]=l=>i.updateStatus(e.user.id,0)),class:"px-2 py-1 rounded-md border text-rose-500 hover:bg-rose-100"},[_(v,{class:"w-5 h-5"})])):(c(),a("button",{key:1,onClick:s[3]||(s[3]=l=>i.updateStatus(e.user.id,1)),class:"px-2 py-1 rounded-md border text-sky-500 hover:bg-sky-100"},"\u627F\u8A8D"))])])):u("",!0)],64)):u("",!0)]),t("div",yt,[wt,_(b,{callback:i.onPageChange1,total:d.totalPage1},null,8,["callback","total"])]),t("div",kt,[t("table",vt,[Ct,t("tbody",Pt,[(c(!0),a(m,null,g(i.paginatedPayments,l=>{var y;return c(),a("tr",jt,[t("td",St,n(l.amount.toLocaleString("jp-JP",{style:"currency",currency:"JPY"})),1),t("td",Lt,n(l.point.toLocaleString())+" pt",1),t("td",It,n((y=l.coupon_name)!=null?y:"-"),1),t("td",Ft,n(l.updated_at),1)])}),256))])])]),t("div",Ht,[Ot,_(b,{callback:i.onPageChange2,total:d.totalPage2},null,8,["callback","total"])]),t("div",Tt,[t("table",Nt,[zt,t("tbody",At,[(c(!0),a(m,null,g(i.paginatedCoupons,l=>(c(),a("tr",Dt,[t("td",Et,n(l.title),1),t("td",Mt,n(i.format_number(l.code)),1),t("td",Vt,n(i.format_number(l.point))+" pt",1),t("td",Bt,n(l.updated_at),1)]))),256))])])]),t("div",Jt,[Gt,_(b,{callback:i.onPageChange,total:d.totalPage},null,8,["callback","total"]),t("button",{onClick:s[4]||(s[4]=(...l)=>i.clear_history&&i.clear_history(...l)),class:"rounded-md px-2 py-1 text-sm font-normal text-white bg-red-500 hover:bg-red-400"}," \u5C65\u6B74\u524A\u9664 ")]),t("div",Kt,[t("table",Rt,[Ut,t("tbody",Yt,[(c(!0),a(m,null,g(i.paginatedLogs,l=>(c(),a("tr",qt,[t("td",Qt,n(l.point_type),1),t("td",Wt,n(l.point_diff),1),t("td",Xt,n(l.point_before+l.point_diff),1),t("td",Zt,n(l.updated_at1),1)]))),256))])])])])]),_:1})],64)}const ce=k(J,[["render",$t]]);export{ce as default};

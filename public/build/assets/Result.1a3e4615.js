import{H as y,L as w,G as C,r as f,o as a,c as l,b as k,w as j,F as _,d as t,f as A,n as d,h,t as m,J as x,a2 as g}from"./app.da46bece.js";import{A as z}from"./UserLayout.7d3e0904.js";import{u as B}from"./useConfirm.18fbcafe.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as V}from"./PlayIcon.99187ea6.js";import"./index.3a790d77.js";const{confirm:p}=B(),L={components:{Head:y,AppLayout:z,Link:w,PlayIcon:V},props:{errors:Object,auth:Object,category_share:Object,products:Object,token:String,show_review:Boolean},data(){return{isCheckAll:!1}},setup(e){let o={},i;for(i=0;i<e.products.data.length;i++)o["id"+e.products.data[i].id]=!1;return{form:C({checks:o,token:e.token})}},computed:{selectedPoints(){let e=0;return this.products.data.forEach(o=>{this.form.checks["id"+o.id]&&(e+=parseInt(o.point))}),e}},methods:{format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},submit(){let e,o=0;var i=0;for(e=0;e<this.products.data.length;e++)this.form.checks["id"+this.products.data[e].id]&&(o++,i=i+parseInt(this.products.data[e].point));let r="";i>0?r="\u9078\u629E\u3057\u305F"+o+"\u70B9\u306E\u5546\u54C1\u3092"+i+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002":r="\u5168\u3066\u306E\u5546\u54C1\u304C\u300C\u7372\u5F97\u6E08\u307F\u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3057\u307E\u3059\u3002",p(r).then(c=>{c&&this.form.post(route("user.gacha.result.exchange"),{onFinish:()=>{}})})},deliver(){let e,o=0;for(e=0;e<this.products.data.length;e++)this.form.checks["id"+this.products.data[e].id]&&o++;p("\u9078\u629E\u3057\u305F"+o+"\u70B9\u306E\u5546\u54C1\u3092\u767A\u9001\u4F9D\u983C\u3057\u307E\u3059\u3002").then(i=>{i&&this.form.post(route("user.gacha.result.deliver"),{onFinish:()=>{}})})},checkall(){let e;for(e=0;e<this.products.data.length;e++)this.products.data[e].status==1&&(this.form.checks["id"+this.products.data[e].id]=this.isCheckAll)},checkone(){this.isCheckAll=this.products.data.length>0,this.products.data.forEach(e=>{this.form.checks["id"+e.id]!=!0&&(this.isCheckAll=!1)})}}},F=t("div",{class:"sticky top-20 z-20 w-full py-4 bg-white"},[t("h1",{class:"text-lg md:text-xl font-bold bg-gradient-to-r from-sky-500 to-sky-400 bg-clip-text text-transparent text-center"}," \u30AC\u30C1\u30E3 \u2013 \u7D50\u679C ")],-1),H={class:"md:w-[760px] m-auto items-center py-2 flex flex-col justify-center"},P={class:"px-6 mb-4 grid grid-cols-2 md:grid-cols-4 gap-x-4 gap-y-6"},O={class:"relative group"},E=["for"],I={class:"transform transition-all duration-200 hover:scale-[1.02] relative"},N=["src"],S={key:0,class:"absolute inset-0 bg-sky-500 bg-opacity-20 flex items-center justify-center"},U=t("div",{class:"bg-white rounded-full p-1 shadow-lg"},[t("svg",{class:"w-5 h-5 text-sky-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1),D=[U],T=["src","alt"],G={class:"absolute top-2 right-2"},J={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-sky-500 to-sky-600 text-white shadow-sm"},R={key:2,class:"absolute top-2 left-2"},q=["id","onUpdate:modelValue"],K={class:"px-1"},Q={key:0,class:"text-xs text-orange-500 text-center"},W={class:"sticky bottom-0 z-10 py-3 mt-6 bg-white"},X={class:"max-w-md m-auto flex items-center justify-between px-4 mb-2"},Y={class:"cursor-pointer inline-flex items-center px-3 py-2 rounded-lg bg-gray-50 hover:bg-gray-100 border border-gray-200 hover:border-gray-300 transition-all duration-200 shadow-sm hover:shadow-md"},Z=t("span",{class:"ml-2 text-xs font-medium text-neutral-700"},"\u5168\u3066\u9078\u629E",-1),$=t("svg",{class:"w-4 h-4 ml-1.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),tt={class:"inline-flex items-center px-3 py-1.5 rounded-full bg-gradient-to-r from-sky-50 to-blue-50 border border-sky-200 shadow-sm"},et=t("svg",{class:"w-4 h-4 text-sky-600 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"})],-1),st=t("span",{class:"text-xs font-medium text-sky-700"},"\u9078\u629E:",-1),ot={class:"ml-1 text-sm font-bold text-sky-600"},rt={class:"max-w-md m-auto flex justify-center gap-x-3 px-4"},it=["disabled"],nt=t("span",null,"\u30DD\u30A4\u30F3\u30C8\u5909\u63DB",-1),at=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1),lt=[nt,at],dt=["disabled"],ct=t("span",null,"\u767A\u9001\u4F9D\u983C",-1),ht=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),mt=[ct,ht],ut=t("div",{class:"pb-6 pt-3 text-center text-xs text-neutral-500"}," \u203B\u9078\u629E\u3055\u308C\u306A\u304B\u3063\u305F\u5546\u54C1\u306F\u300C\u7372\u5F97\u6E08\u307F \u5546\u54C1\u4E00\u89A7\u300D\u306B\u79FB\u52D5\u3055\u308C\u307E\u3059\u3002 ",-1);function ft(e,o,i,r,c,n){const v=f("Head"),b=f("AppLayout");return a(),l(_,null,[k(v,{title:"\u30AC\u30C1\u30E3\u2013\u7D50\u679C"}),k(b,{is_home:!0},{default:j(()=>[F,t("div",H,[t("div",null,[t("div",P,[(a(!0),l(_,null,A(i.products.data,(s,kt)=>(a(),l("div",O,[t("label",{for:"checkbox"+s.id,class:"block cursor-pointer"},[t("div",I,[t("div",{class:d(["relative mb-2 rounded-lg overflow-hidden border-2 transition-all duration-200",{"border-sky-500 shadow-lg shadow-sky-200 scale-[1.02]":r.form.checks["id"+s.id],"border-transparent hover:border-sky-300":!r.form.checks["id"+s.id]&&s.status==1,"border-gray-200":s.status!=1}])},[t("img",{class:"w-full h-full object-cover",src:s.image},null,8,N),r.form.checks["id"+s.id]?(a(),l("div",S,D)):h("",!0),s.badge?(a(),l("img",{key:1,src:s.badge,class:"absolute bottom-2 right-2 w-[25%]",alt:s.badge},null,8,T)):h("",!0),t("div",G,[t("div",J,m(n.format_number(s.point))+" PT ",1)]),s.status==1?(a(),l("div",R,[x(t("input",{id:"checkbox"+s.id,type:"checkbox","onUpdate:modelValue":u=>r.form.checks["id"+s.id]=u,onChange:o[0]||(o[0]=(...u)=>n.checkone&&n.checkone(...u)),class:d(["h-4 w-4 cursor-pointer rounded border-sky-400 text-sky-500 shadow-sm focus:ring-sky-500",{hidden:s.status==3||r.form.checks["id"+s.id]}])},null,42,q),[[g,r.form.checks["id"+s.id]]])])):h("",!0)],2),t("div",K,[t("div",{class:d(["text-neutral-800 font-medium truncate text-center text-sm",{"text-sky-700 font-semibold":r.form.checks["id"+s.id]}])},m(s.name),3),t("div",{class:d(["text-neutral-500 text-xs truncate text-center mt-0.5",{"text-sky-600":r.form.checks["id"+s.id]}])},m(s.rare),3),s.status==3?(a(),l("div",Q," \u767A\u9001\u4F9D\u983C\u6E08\u307F ")):h("",!0)])])],8,E)]))),256))]),t("div",W,[t("div",X,[t("label",Y,[x(t("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=s=>c.isCheckAll=s),onChange:o[2]||(o[2]=s=>n.checkall()),class:"h-4 w-4 rounded border-neutral-300 text-sky-500 shadow-sm focus:ring-sky-500"},null,544),[[g,c.isCheckAll]]),Z,$]),t("div",tt,[et,st,t("span",ot,m(n.format_number(n.selectedPoints))+" PT",1)])]),t("div",rt,[t("button",{type:"button",onClick:o[3]||(o[3]=s=>n.submit()),class:d([{"opacity-50":r.form.processing},"flex-1 inline-flex items-center justify-center py-2 rounded-lg font-medium text-white bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 transform hover:scale-105 transition-all duration-200 shadow-md hover:shadow-lg gap-2"]),disabled:r.form.processing},lt,10,it),t("button",{type:"button",onClick:o[4]||(o[4]=s=>n.deliver()),class:d([{"opacity-50":r.form.processing},"flex-1 inline-flex items-center justify-center py-2 rounded-lg font-medium text-white bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 transform hover:scale-105 transition-all duration-200 shadow-md hover:shadow-lg gap-2"]),disabled:r.form.processing},mt,10,dt)])]),ut])])]),_:1})],64)}const yt=M(L,[["render",ft]]);export{yt as default};

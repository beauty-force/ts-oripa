import{H as V,L as F,G as N,r as p,o as l,c as d,b as _,w as b,F as m,d as e,f as v,n as f,J as w,a1 as C,h as u,t as c,e as h}from"./app.ac5a6315.js";import{A as O}from"./UserLayout.fe321fe6.js";import{P}from"./ProductHeader.1202468f.js";import{u as B}from"./useConfirm.a405427d.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.b5176747.js";const{confirm:A,alert:g}=B(),S={components:{Head:V,AppLayout:O,Link:F,ProductHeader:P},props:{errors:Object,gacha:Object,category_share:Object,products:Object,profile:Object,delivery_limit:Number},data(){return{hasCheck:!1,main_tab:[{title:"\u672A\u9078\u629E",route_url:route("user.products"),is_active:!0},{title:"\u767A\u9001\u5F85\u3061",route_url:route("user.products.wait"),is_active:!1},{title:"\u767A\u9001\u6E08\u307F",route_url:route("user.products.delivered"),is_active:!1}],ready_delivery:0,products_count:0,isCheckAll:!1,_products:this.products.data.filter(o=>o.status==1)}},setup(o){return{form:N({checks:{}})}},methods:{format_number(o){return String(o).replace(/(.)(?=(\d{3})+$)/g,"$1,")},changeCheck(){let o,s=!1;for(this._products=this.products.data.filter(n=>n.status==1),this.isCheckAll=this._products.length>0,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]?s=!0:this.isCheckAll=!1;this.hasCheck=s},submit(o){let s,n=0;var i=0;let r=0;for(s=0;s<this._products.length;s++)this.form.checks["id"+this._products[s].id]&&(n++,i=parseInt(i)+parseInt(this._products[s].point),this._products[s].rare=="\u30DD\u30A4\u30F3\u30C8"&&r++);if(o=="point")i>0&&A("\u4EA4\u63DB\u3057\u307E\u3059\u304B\uFF1F \u9078\u629E\u3057\u305F"+n+"\u70B9\u306E\u5546\u54C1\u3092"+this.format_number(i)+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002").then(a=>{a&&this.form.post(route("user.products.point.exchange"),{onFinish:()=>{this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})});else{if(r>0){g("\u30DD\u30A4\u30F3\u30C8\u306F\u767A\u9001\u3067\u304D\u307E\u305B\u3093");return}if(n>0){if(i<this.delivery_limit){g("\u767A\u9001\u4F9D\u983C\u304C\u3067\u304D\u308B\u6700\u4F4E\u30DD\u30A4\u30F3\u30C8\u306F"+this.format_number(this.delivery_limit)+"pt\u3067\u3059\u3002");return}this.products_count=n,this.ready_delivery=1}}},back_delivery(){this.ready_delivery=0},submit_delivery(){this.profile.address?A(""+this.products_count+"\u70B9\u306E\u5546\u54C1\u3092\u914D\u9001\u3057\u307E\u3059\u304B\uFF1F").then(o=>{o&&this.form.post(route("user.delivery.post"),{onFinish:()=>{this.ready_delivery=2,this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})}):g("\u5165\u529B\u30A8\u30E9\u30FC\u3001\u914D\u9001\u5148\u60C5\u5831\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002")},checkall(){let o;for(this.hasCheck=!1,o=0;o<this._products.length;o++)this.form.checks["id"+this._products[o].id]=this.isCheckAll,this.hasCheck=this.isCheckAll}}},U={class:""},D={class:"max-w-7xl mx-auto px-4 py-6"},T={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"flex items-start gap-4 relative"},E=["id","onUpdate:modelValue"],G=["for"],J={class:"flex gap-2"},M={class:"relative"},q={class:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-2"},K=["src"],Q=["src","alt"],R={class:"flex-1 space-y-2"},W={class:"flex items-center gap-2"},X=["src"],Y={class:"text-sm font-medium text-gray-700 px-2"},Z={class:"flex items-center gap-2"},$={class:"text-sm font-medium text-gray-500 bg-gray-50 px-2 py-1 rounded-full inline-block"},ee={key:0,class:"inline-flex items-center bg-gradient-to-r from-sky-500 to-sky-400 text-white px-3 py-1 rounded-full text-sm font-medium shadow-sm"},te=e("img",{src:"/images/icon_cash.png",class:"h-4 mr-1.5"},null,-1),se={class:"text-xs text-gray-400 bg-gray-50 px-3 py-1 rounded-lg border border-gray-100"},oe=e("span",{class:"font-medium text-gray-500"},"\u4FDD\u6709\u671F\u9650:\xA0",-1),re={class:"sticky bottom-0 bg-white p-4"},ie={class:"bg-white"},ne={class:"flex flex-col md:flex-row items-center justify-between gap-4"},le={class:"flex items-center cursor-pointer"},de=e("span",{class:"ml-2 font-medium text-sky-600"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),ce={class:"flex gap-3"},ae=["disabled"],ue=["disabled"],he={key:0,class:"pt-6 md:px-6 px-4"},_e=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u5185\u5BB9\u306E\u78BA\u8A8D",-1),me=e("hr",{class:"mb-6"},null,-1),pe={class:"mb-3 text-sm"},fe={class:"mb-8 grid md:grid-cols-2"},be={key:0,class:"mb-0 border-neutral-200 border-b p-1"},ge={class:"flex border-neutral-200 items-center"},ke=["src"],ye=["for"],xe={class:"text-red-500"},ve=e("div",{class:"mb-2 text-sm"},"\u914D\u9001\u5148\u60C5\u5831",-1),we={class:"mb-8 border border-neutral-200 rounded-md px-4 py-2 flex items-center justify-between"},Ce={class:"flex-1"},Ae={class:"font-bold text-sm"},je={class:"text-sm"},Le={class:"text-sm"},He={class:"mb-8 text-center text-neutral-50"},Ve=["disabled"],Fe=["disabled"],Ne={key:1,class:"pt-6 md:px-6 px-4"},Oe=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u624B\u7D9A\u304D\u5B8C\u4E86",-1),Pe=e("hr",{class:"mb-8"},null,-1),Be={class:"mb-8"},Ie=e("br",null,null,-1),Se=e("br",null,null,-1),Ue=e("span",{class:"font-bold"},"\u6570\u65E5~\u6570\u9031\u9593",-1),De=e("br",null,null,-1),Te={class:"mb-6 text-center text-neutral-50 flex flex-wrap justify-center gap-2"};function ze(o,s,n,i,r,a){const j=p("Head"),L=p("ProductHeader"),k=p("Link"),H=p("AppLayout");return l(),d(m,null,[_(j,{title:"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7"}),_(H,null,{default:b(()=>[e("div",U,[e("div",D,[_(L,{main_tab:r.main_tab},null,8,["main_tab"]),r.ready_delivery==0?(l(),d("div",T,[(l(!0),d(m,null,v(n.products.data,(t,y)=>(l(),d("div",{key:y,class:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border border-gray-100"},[e("div",{class:f(["p-3 overflow-hidden",{"bg-sky-50 border-sky-200 border":i.form.checks["id"+t.id]}])},[e("div",z,[w(e("input",{id:"checkbox"+t.id,"onUpdate:modelValue":x=>i.form.checks["id"+t.id]=x,type:"checkbox",onChange:s[0]||(s[0]=x=>a.changeCheck()),class:"mt-1 cursor-pointer rounded-full border-sky-300 text-sky-600 focus:ring-sky-500 absolute top-0 right-0"},null,40,E),[[C,i.form.checks["id"+t.id]]]),e("label",{for:"checkbox"+t.id,class:"flex-1 cursor-pointer"},[e("div",J,[e("div",M,[e("div",q,[e("img",{src:t.image,class:"h-full w-20 object-contain rounded-lg"},null,8,K)]),t.badge?(l(),d("img",{key:0,src:t.badge,class:"absolute -top-2 -right-2 w-[35%] drop-shadow-lg",alt:t.badge},null,8,Q)):u("",!0)]),e("div",R,[e("div",W,[t.rank>0?(l(),d("img",{key:0,src:`/images/badge${t.rank}.png`,class:"h-6 drop-shadow-sm"},null,8,X)):u("",!0),e("div",Y,c(t.name),1)]),e("div",Z,[e("div",$,c(t.rare),1),t.is_lost_product!=2?(l(),d("div",ee,[te,e("span",null,c(t.point.toLocaleString())+"\xA0PT",1)])):u("",!0)]),e("div",se,[oe,h(" "+c(t.expiration),1)])])])],8,G)])],2)]))),128))])):u("",!0),e("div",re,[e("div",ie,[e("div",ne,[e("label",le,[w(e("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=t=>r.isCheckAll=t),onChange:s[2]||(s[2]=t=>a.checkall()),class:"h-5 w-5 cursor-pointer rounded border-sky-400 text-sky-600 focus:ring-sky-500"},null,544),[[C,r.isCheckAll]]),de]),e("div",ce,[e("button",{type:"button",onClick:s[3]||(s[3]=t=>a.submit("point")),disabled:i.form.processing||!r.hasCheck,class:"px-6 py-2.5 bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-lg font-medium text-sm transition-all duration-200 hover:from-sky-600 hover:to-sky-700 disabled:opacity-50 disabled:cursor-not-allowed"}," \u30DD\u30A4\u30F3\u30C8\u306B\u63DB\u3048\u308B ",8,ae),e("button",{type:"button",onClick:s[4]||(s[4]=t=>a.submit("delivery")),disabled:i.form.processing||!r.hasCheck,class:"px-6 py-2.5 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg font-medium text-sm transition-all duration-200 hover:from-emerald-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed"}," \u767A\u9001\u3059\u308B ",8,ue)])])])])])]),r.ready_delivery==1?(l(),d("div",he,[_e,me,e("div",pe,"\u914D\u9001\u5546\u54C1 \uFF08\u8A08"+c(r.products_count)+"\u70B9\uFF09",1),e("div",fe,[(l(!0),d(m,null,v(n.products.data,(t,y)=>(l(),d(m,null,[i.form.checks["id"+t.id]?(l(),d("div",be,[e("div",ge,[e("img",{src:t.image,class:"h-20 inline-block object-contain"},null,8,ke),e("label",{for:"checkbox"+t.id,class:"cursor-pointer h-20 flex flex-col justify-evenly flex-1 text-xs py-1 px-2"},[e("div",null,c(t.name),1),e("div",null,c(t.rare),1),e("div",xe,c(t.point)+"pt",1)],8,ye)])])):u("",!0)],64))),256))]),ve,e("div",we,[e("div",Ce,[n.profile.id?(l(),d(m,{key:0},[e("p",Ae,c(n.profile.first_name+n.profile.last_name),1),e("p",je,"\u3012"+c(n.profile.postal_code),1),e("p",Le,c(n.profile.address),1)],64)):u("",!0)]),e("div",null,[_(k,{href:o.route("user.address"),type:"button",onClick:s[5]||(s[5]=t=>a.back_delivery()),class:f([{"opacity-25":i.form.processing||!r.hasCheck},"inline-block items-center px-5 py-1.5 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!r.hasCheck},{default:b(()=>[h(" \u7DE8\u96C6 ")]),_:1},8,["href","class","disabled"])])]),e("div",He,[e("button",{type:"button",onClick:s[6]||(s[6]=t=>a.back_delivery()),class:f([{"opacity-25":i.form.processing||!r.hasCheck},"w-32 inline-block items-center px-1 py-2 rounded-md font-semibold text-sm text-white uppercase tracking-widest bg-neutral-600 hover:bg-neutral-700 transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!r.hasCheck}," \u623B\u308B ",10,Ve),e("button",{type:"button",onClick:s[7]||(s[7]=t=>a.submit_delivery()),class:f([{"opacity-25":i.form.processing||!r.hasCheck},"w-32 inline-block items-center px-1 py-2 rounded-md font-semibold text-sm text-white uppercase tracking-widest bg-theme bg-theme-hover transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!r.hasCheck}," \u767A\u9001\u3059\u308B ",10,Fe)])])):u("",!0),r.ready_delivery==2?(l(),d("div",Ne,[Oe,Pe,e("div",Be,[h(" \u8A08"+c(r.products_count)+"\u70B9\u306E\u5546\u54C1\u306E\u914D\u9001\u624B\u7D9A\u304D\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",1),Ie,Se,h(" \u5546\u54C1\u306E\u767A\u9001\u306B\u306F"),Ue,h("\u304B\u304B\u308B\u53EF\u80FD\u6027\u304C\u3054\u3056\u3044\u307E\u3059\u3002"),De,h(" \u3054\u4E86\u627F\u306E\u307B\u3069\u3088\u308D\u3057\u304F\u304A\u9858\u3044\u81F4\u3057\u307E\u3059\u3002 ")]),e("div",Te,[_(k,{href:o.route("main"),class:"w-48 inline-block items-center px-1 py-2 bg-red-600 rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150 m-1"},{default:b(()=>[h(" \u30AC\u30C1\u30E3\u30DA\u30FC\u30B8\u3078 ")]),_:1},8,["href"]),e("button",{type:"button",onClick:s[8]||(s[8]=t=>a.back_delivery()),class:"w-48 inline-block items-center px-1 py-2 rounded-md font-semibold text-sm text-white uppercase tracking-widest bg-theme bg-theme-hover transition ease-in-out duration-150 m-1"}," \u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7\u3078 ")])])):u("",!0)]),_:1})],64)}const Qe=I(S,[["render",ze]]);export{Qe as default};
